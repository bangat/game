<!DOCTYPE html>
<!-- saved from url=(0233)https://firebasestorage.googleapis.com/v0/b/youtubu-c770d.firebasestorage.app/o/files%2F%EC%B2%99%EC%B2%99%EB%B0%95%EC%8A%A4_1759461917240_%EC%B2%99%EC%B2%99%EB%B0%95%EC%82%AC.html?alt=media&token=429bfc1d-b128-41e3-ac24-ea14049f7118 -->
<html lang="ko"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>ì²™ì²™ë°•ì‚¬ ê²Œì„</title>
    <style>
        /* CSSëŠ” ì´ì „ê³¼ ë™ì¼í•©ë‹ˆë‹¤. */
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap');
        :root { --bg-color: #f0f8ff; --primary-color: #4a90e2; --card-bg-color: #ffffff; --correct-color: #28a745; --incorrect-color: #dc3545; --font-color: #333333; --border-radius: 15px; --shadow: 0 4px 15px rgba(0,0,0,0.1); }
        body { font-family: 'Noto Sans KR', sans-serif; background-color: var(--bg-color); color: var(--font-color); display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; padding: 10px; box-sizing: border-box; -webkit-user-select: none; user-select: none; overscroll-behavior-y: contain; }
        .game-screen { display: none; }
        .game-screen.active { display: block; }
        #game-container { width: 100%; max-width: 600px; padding: 20px; box-sizing: border-box; text-align: center; }
        h1 { font-size: 2.5em; color: var(--primary-color); margin: 10px 0 20px 0; }
        h2 { font-size: 2em; color: var(--primary-color); margin: 10px 0 30px 0; }
        #start-screen .menu-button { display: block; width: 80%; max-width: 300px; margin: 20px auto; padding: 20px; font-size: 1.5em; font-weight: bold; color: white; background-color: var(--primary-color); border: none; border-radius: 30px; cursor: pointer; transition: transform 0.2s; }
        #start-screen .menu-button:hover { transform: scale(1.05); }
        #status-bar { display: flex; justify-content: space-around; flex-wrap: wrap; gap: 10px; margin-top: 10px; font-size: 1.1em; font-weight: bold; }
        .status-box { background-color: rgba(255, 255, 255, 0.7); padding: 10px 15px; border-radius: 20px; }
        .feedback { margin-top: 20px; font-size: 1.5em; font-weight: bold; height: 40px; }
        .feedback-correct { color: var(--correct-color); }
        .feedback-incorrect { color: var(--incorrect-color); }
        .back-button { position: absolute; top: 20px; left: 20px; font-size: 1.5em; background: none; border: none; cursor: pointer; }
        #draggable-item-wrapper { height: 180px; display: flex; justify-content: center; align-items: center; margin-bottom: 20px; }
        .draggable-item { width: 140px; height: 140px; background-color: var(--card-bg-color); border-radius: var(--border-radius); box-shadow: var(--shadow); display: flex; flex-direction: column; justify-content: center; align-items: center; cursor: grab; }
        .draggable-item.dragging { opacity: 0.5; }
        .ghost-item { position: absolute; width: 140px; height: 140px; background-color: var(--card-bg-color); border-radius: var(--border-radius); box-shadow: 0 8px 25px rgba(0,0,0,0.2); pointer-events: none; z-index: 100; transform: scale(1.05); }
        .item-emoji { font-size: 3.5em; }
        .item-name { font-size: 1.1em; font-weight: bold; margin-top: 10px; }
        #drop-zones { display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; }
        .drop-zone { flex-grow: 1; min-width: 120px; padding: 20px 10px; border: 3px dashed var(--primary-color); border-radius: var(--border-radius); background-color: rgba(255, 255, 255, 0.5); transition: background-color 0.2s, transform 0.2s; }
        .drop-zone.drag-over { background-color: #dcfce7; transform: translateY(-5px); }
        .zone-name { font-size: 1.2em; font-weight: bold; }
        #odd-one-out-options { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .odd-option { background-color: var(--card-bg-color); border-radius: var(--border-radius); box-shadow: var(--shadow); padding: 20px; cursor: pointer; transition: transform 0.2s; }
        .odd-option:hover { transform: scale(1.05); }
        #sticker-book-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); gap: 15px; max-height: 70vh; overflow-y: auto; padding: 10px; background: rgba(255,255,255,0.7); border-radius: var(--border-radius); }
        .sticker-item { background: var(--card-bg-color); border-radius: var(--border-radius); padding: 10px; box-shadow: var(--shadow); }
        .sticker-item.locked { background: #e0e0e0; color: #a0a0a0; }
        .sticker-item .item-emoji { font-size: 2.5em; }
        .sticker-item .item-name { font-weight: bold; font-size: 0.9em; }
        #sticker-notification { position: fixed; top: 20px; left: 50%; transform: translateX(-50%); background-color: var(--correct-color); color: white; padding: 15px 30px; border-radius: 30px; font-size: 1.2em; font-weight: bold; box-shadow: 0 4px 15px rgba(0,0,0,0.2); opacity: 0; visibility: hidden; transition: opacity 0.5s, top 0.5s; z-index: 200; }
        #sticker-notification.show { opacity: 1; visibility: visible; top: 40px; }
    </style>
<script src="chrome-extension://ecmeogcbcoalojmkfkmancobmiahaigg/content_script/content_script.js"></script></head>
<body>
    <div id="game-container">
        <div id="start-screen" class="game-screen active"><h1>ì²™ì²™ë°•ì‚¬ ë¶„ë¥˜í•˜ê¸°</h1><button id="start-game-btn" class="menu-button">ğŸš€ ê²Œì„ ì‹œì‘</button><button id="sticker-book-btn" class="menu-button">ğŸŒŸ ìŠ¤í‹°ì»¤ ë„ê°</button></div>
        <div id="sort-game-screen" class="game-screen"><div id="header"><div id="status-bar"><div class="status-box">ë ˆë²¨: <span id="level">1</span></div><div class="status-box">ì ìˆ˜: <span id="score">0</span></div><div class="status-box">ì„±ê³µ: <span id="progress">0 / 10</span></div></div></div><div id="draggable-item-wrapper"></div><div id="drop-zones"></div><div id="feedback-sort" class="feedback"></div></div>
        <div id="odd-one-out-screen" class="game-screen"><h2>ë‹¤ë¥¸ ì¹œêµ¬ë¥¼ ì°¾ì•„ë´!</h2><div id="odd-one-out-options"></div><div id="feedback-odd" class="feedback"></div></div>
        <div id="sticker-book-screen" class="game-screen"><button id="sticker-book-back-btn" class="back-button">â¬…ï¸</button><h2>ë‚˜ì˜ ìŠ¤í‹°ì»¤ ë„ê°</h2><div id="sticker-book-grid"></div></div>
        <div id="game-over-screen" class="game-screen"><h2>ğŸ‰ ëª¨ë“  ë ˆë²¨ í´ë¦¬ì–´! ğŸ‰</h2><p>ìµœì¢… ì ìˆ˜: <span id="final-score">0</span>ì </p><button id="restart-btn">ì²˜ìŒë¶€í„° ë‹¤ì‹œí•˜ê¸°</button></div>
    </div>
    <div id="sticker-notification">ğŸŒŸ ìƒˆë¡œìš´ ìŠ¤í‹°ì»¤ íšë“!</div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- ë°ì´í„° ì •ì˜ (ì´ì „ê³¼ ë™ì¼) ---
        const allItems = [
            { name: 'ì‚¬ê³¼', emoji: 'ğŸ', category: 'ê³¼ì¼' }, { name: 'ë°”ë‚˜ë‚˜', emoji: 'ğŸŒ', category: 'ê³¼ì¼' }, { name: 'ë”¸ê¸°', emoji: 'ğŸ“', category: 'ê³¼ì¼' }, { name: 'ìˆ˜ë°•', emoji: 'ğŸ‰', category: 'ê³¼ì¼' }, { name: 'í¬ë„', emoji: 'ğŸ‡', category: 'ê³¼ì¼' },
            { name: 'ì‚¬ì', emoji: 'ğŸ¦', category: 'ë™ë¬¼' }, { name: 'í˜¸ë‘ì´', emoji: 'ğŸ¯', category: 'ë™ë¬¼' }, { name: 'ì½”ë¼ë¦¬', emoji: 'ğŸ˜', category: 'ë™ë¬¼' }, { name: 'ì›ìˆ­ì´', emoji: 'ğŸ’', category: 'ë™ë¬¼' }, { name: 'ê°•ì•„ì§€', emoji: 'ğŸ¶', category: 'ë™ë¬¼' },
            { name: 'ì±…ìƒ', emoji: 'ğŸª‘', category: 'ì‚¬ë¬¼' }, { name: 'ì‹œê³„', emoji: 'â°', category: 'ì‚¬ë¬¼' }, { name: 'ì—°í•„', emoji: 'âœï¸', category: 'ì‚¬ë¬¼' }, { name: 'ê°€ë°©', emoji: 'ğŸ’', category: 'ì‚¬ë¬¼' },
            { name: 'ìë™ì°¨', emoji: 'ğŸš—', category: 'íƒˆê²ƒ' }, { name: 'ë¹„í–‰ê¸°', emoji: 'âœˆï¸', category: 'íƒˆê²ƒ' }, { name: 'ê¸°ì°¨', emoji: 'ğŸš‚', category: 'íƒˆê²ƒ' }, { name: 'ë°°', emoji: 'ğŸš¢', category: 'íƒˆê²ƒ' },
            { name: 'ë‹¹ê·¼', emoji: 'ğŸ¥•', category: 'ì±„ì†Œ' }, { name: 'ì˜¤ì´', emoji: 'ğŸ¥’', category: 'ì±„ì†Œ' }, { name: 'í† ë§ˆí† ', emoji: 'ğŸ…', category: 'ì±„ì†Œ' }, { name: 'ë¸Œë¡œì½œë¦¬', emoji: 'ğŸ¥¦', category: 'ì±„ì†Œ' }
        ];
        const levelConfig = [
            { level: 1, categories: ['ê³¼ì¼', 'ë™ë¬¼'], itemsToPass: 10 }, { level: 2, categories: ['ê³¼ì¼', 'ë™ë¬¼', 'ì‚¬ë¬¼'], itemsToPass: 15 }, { level: 3, categories: ['ì‚¬ë¬¼', 'íƒˆê²ƒ', 'ì±„ì†Œ'], itemsToPass: 15 },
        ];
        
        // --- ê²Œì„ ìƒíƒœ ë³€ìˆ˜ ---
        let currentLevel, score, correctInLevel, levelItems, currentItemIndex;
        let unlockedStickers = JSON.parse(localStorage.getItem('unlockedStickers')) || [];

        // --- ì‚¬ìš´ë“œ & ìƒˆë¡œê³ ì¹¨ ë°©ì§€ ---
        const correctSound = new Audio("data:audio/mpeg;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjQ1LjEwMAAAAAAAAAAAAAAA//tAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWWimRlVhxMAAAGQ0gAABY5gAABpAAAACgAAAA0AAAAgAAAAARTimRlVhxMAAAGQ0gAABY5gAABpAAAACgAAAA0AAAAgAAAAARUDHwABBuLBWBgAABAAWAAACggAAAsKAABf9v/7T9CAMAADXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV//tA0JYAAAhhEwAAYUmAAABY9BUMCAAAAAD/88+lJgABgAAAG9v+2h5DMP//8AjGkcjLAAAAVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/7QNCWAAAhhgQAD+lJgAABY9BUMCAAAAAD/88+lJgABgAAAG9v+2h5DMP//8AjGkcjLAAAAVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/7QNCWAAAhhgQAD+lJgAABY9BUMCAAAAAD/88+lJgABgAAAG9v+2h5DMP//8AjGkcjLAAAAVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/7QNCWAAAhhgQAD+lJgAABY9BUMCAAAAAD/88+lJgABgAAAG9v+2h5DMP//8AjGkcjLAAAAVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/7QNCWAAAhhgQAD+lJgAABY9BUMCAAAAAD/88+lJgABgAAAG9v+2h5DMP//8AjGkcjLAAAAVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/7QNCWAAAAAABVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/7QNCWAAAAAABVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/7QNCWAAAAAABVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/7QNCWAAAAAABVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/7QNCWAAAAAABVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/7QNCWAAAAAABVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/7QNCWAAAAAABVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/7QNCWAAAAAABVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/7QNCWAAAAAABVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/7QNCWAAAAAABVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/AOAEAAAAAAAoAAAAAAAAAAAAAAA");
        window.addEventListener('beforeunload', (e) => { e.preventDefault(); e.returnValue = ''; });

        // --- DOM ìš”ì†Œë“¤ì„ ì—¬ê¸°ì„œ í•œë²ˆì— ì„ ì–¸í•©ë‹ˆë‹¤ ---
        const screens = document.querySelectorAll('.game-screen');
        const startGameBtn = document.getElementById('start-game-btn');
        const stickerBookBtn = document.getElementById('sticker-book-btn');
        const stickerBookBackBtn = document.getElementById('sticker-book-back-btn');
        const restartBtn = document.getElementById('restart-btn');

        // --- í•µì‹¬ í•¨ìˆ˜ë“¤ (ì´ì „ê³¼ ë™ì¼) ---
        function showScreen(screenId) { screens.forEach(screen => screen.classList.toggle('active', screen.id === screenId)); }
        function unlockSticker(itemName) { if (!unlockedStickers.includes(itemName)) { unlockedStickers.push(itemName); localStorage.setItem('unlockedStickers', JSON.stringify(unlockedStickers)); const notification = document.getElementById('sticker-notification'); notification.classList.add('show'); setTimeout(() => notification.classList.remove('show'), 2000); } }
        function displayStickerBook() { const grid = document.getElementById('sticker-book-grid'); grid.innerHTML = ''; allItems.forEach(item => { const isUnlocked = unlockedStickers.includes(item.name); const stickerDiv = document.createElement('div'); stickerDiv.className = `sticker-item ${isUnlocked ? '' : 'locked'}`; stickerDiv.innerHTML = `<div class="item-emoji">${isUnlocked ? item.emoji : 'â“'}</div><div class="item-name">${isUnlocked ? item.name : '????'}</div>`; grid.appendChild(stickerDiv); }); showScreen('sticker-book-screen'); }
        function initializeGame() { currentLevel = 1; score = 0; startSortLevel(); }
        function startSortLevel() { showScreen('sort-game-screen'); correctInLevel = 0; currentItemIndex = 0; const config = levelConfig[currentLevel - 1]; const filtered = allItems.filter(item => config.categories.includes(item.category)); levelItems = [...filtered].sort(() => Math.random() - 0.5); updateStatusDisplay(); createDropZones(config.categories); loadNextSortItem(); }
        function loadNextSortItem() {
            if (currentItemIndex >= levelItems.length) { currentItemIndex = 0; levelItems.sort(() => Math.random() - 0.5); }
            const feedback = document.getElementById('feedback-sort');
            feedback.textContent = ''; feedback.className = 'feedback';
            const item = levelItems[currentItemIndex];
            const draggableItemWrapper = document.getElementById('draggable-item-wrapper');
            draggableItemWrapper.innerHTML = `<div class="draggable-item"><span class="item-emoji">${item.emoji}</span><span class="item-name">${item.name}</span></div>`;
            const draggableItem = draggableItemWrapper.querySelector('.draggable-item');
            draggableItem.draggable = true;
            addDragEvents(draggableItem);
            addTouchEvents(draggableItem);
        }
        function handleSortAnswer(isCorrect) {
            const item = levelItems[currentItemIndex];
            if (isCorrect) {
                correctSound.currentTime = 0; correctSound.play().catch(e => console.log("Sound play failed:", e));
                score += 10; correctInLevel++; unlockSticker(item.name);
                document.getElementById('feedback-sort').textContent = 'ì •ë‹µ! ğŸ‰';
                document.getElementById('feedback-sort').className = 'feedback feedback-correct';
                updateStatusDisplay();
                setTimeout(() => {
                    const config = levelConfig[currentLevel - 1];
                    if (correctInLevel >= config.itemsToPass) {
                        currentLevel++;
                        if (currentLevel > levelConfig.length) { endGame(); } else { startOddOneOutGame(); }
                    } else { currentItemIndex++; loadNextSortItem(); }
                }, 1000);
            } else {
                document.getElementById('feedback-sort').textContent = 'ë‹¤ì‹œ í•´ë³¼ê¹Œìš”? ğŸ¤”';
                document.getElementById('feedback-sort').className = 'feedback feedback-incorrect';
            }
        }
        function startOddOneOutGame() {
            showScreen('odd-one-out-screen');
            const feedback = document.getElementById('feedback-odd'); feedback.textContent = '';
            const categories = [...new Set(allItems.map(i => i.category))];
            const correctCatIndex = Math.floor(Math.random() * categories.length);
            const correctCategory = categories[correctCatIndex];
            let wrongCatIndex;
            do { wrongCatIndex = Math.floor(Math.random() * categories.length); } while (wrongCatIndex === correctCatIndex);
            const wrongCategory = categories[wrongCatIndex];
            const correctItemsPool = allItems.filter(i => i.category === correctCategory).sort(() => 0.5 - Math.random());
            const wrongItem = allItems.filter(i => i.category === wrongCategory).sort(() => 0.5 - Math.random())[0];
            const options = [...correctItemsPool.slice(0, 3), wrongItem].sort(() => 0.5 - Math.random());
            const optionsContainer = document.getElementById('odd-one-out-options');
            optionsContainer.innerHTML = '';
            options.forEach(option => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'odd-option';
                optionDiv.innerHTML = `<span class="item-emoji">${option.emoji}</span><span class="item-name">${option.name}</span>`;
                optionDiv.onclick = () => {
                    if (option.category === wrongCategory) {
                        correctSound.currentTime = 0; correctSound.play().catch(e => console.log("Sound play failed:", e));
                        score += 20; unlockSticker(option.name);
                        feedback.textContent = 'ì°¾ì•˜ë‹¤! ì •ë‹µì´ì—ìš”! ğŸ‘';
                        feedback.className = 'feedback feedback-correct';
                        setTimeout(startSortLevel, 1500);
                    } else {
                        feedback.textContent = 'ìŒ.. ë‹¤ë¥¸ ì¹œêµ¬ê°€ ìˆì„í…ë°?';
                        feedback.className = 'feedback feedback-incorrect';
                    }
                };
                optionsContainer.appendChild(optionDiv);
            });
        }
        function addDragEvents(item) { item.addEventListener('dragstart', () => item.classList.add('dragging')); item.addEventListener('dragend', () => item.classList.remove('dragging')); }
        function addTouchEvents(item) {
            let ghost, startX, startY, offsetX, offsetY, lastDropZone;
            item.addEventListener('touchstart', e => {
                e.preventDefault();
                const touch = e.touches[0]; startX = touch.clientX; startY = touch.clientY;
                const rect = item.getBoundingClientRect(); offsetX = startX - rect.left; offsetY = startY - rect.top;
                ghost = item.cloneNode(true); ghost.classList.add('ghost-item'); document.body.appendChild(ghost);
                ghost.style.left = `${startX - offsetX}px`; ghost.style.top = `${startY - offsetY}px`;
                item.style.opacity = '0.5';
            }, { passive: false });
            item.addEventListener('touchmove', e => {
                e.preventDefault();
                if (!ghost) return;
                const touch = e.touches[0]; const newX = touch.clientX; const newY = touch.clientY;
                ghost.style.left = `${newX - offsetX}px`; ghost.style.top = `${newY - offsetY}px`;
                if (lastDropZone) lastDropZone.classList.remove('drag-over');
                ghost.style.visibility = 'hidden';
                const elementUnder = document.elementFromPoint(newX, newY);
                ghost.style.visibility = 'visible';
                if (elementUnder) { const dropZone = elementUnder.closest('.drop-zone'); if (dropZone) { dropZone.classList.add('drag-over'); lastDropZone = dropZone; } }
            }, { passive: false });
            item.addEventListener('touchend', e => {
                item.style.opacity = '1';
                if (!ghost) return;
                if (lastDropZone) {
                    lastDropZone.classList.remove('drag-over');
                    const currentItem = levelItems[currentItemIndex];
                    handleSortAnswer(currentItem.category === lastDropZone.dataset.category);
                }
                document.body.removeChild(ghost); ghost = null; lastDropZone = null;
            });
        }
        function addDropZoneEvents() { document.querySelectorAll('.drop-zone').forEach(zone => { zone.addEventListener('dragover', e => { e.preventDefault(); zone.classList.add('drag-over'); }); zone.addEventListener('dragleave', () => zone.classList.remove('drag-over')); zone.addEventListener('drop', e => { e.preventDefault(); zone.classList.remove('drag-over'); const currentItem = levelItems[currentItemIndex]; handleSortAnswer(currentItem.category === zone.dataset.category); }); }); }
        function endGame() { document.getElementById('final-score').textContent = score; showScreen('game-over-screen'); }
        function updateStatusDisplay() { document.getElementById('level').textContent = currentLevel; document.getElementById('score').textContent = score; const config = levelConfig[currentLevel - 1]; if(config) document.getElementById('progress').textContent = `${correctInLevel} / ${config.itemsToPass}`; }
        function createDropZones(categories) { const container = document.getElementById('drop-zones'); container.innerHTML = ''; categories.forEach(category => { const zone = document.createElement('div'); zone.className = 'drop-zone'; zone.dataset.category = category; const emojiMap = {'ê³¼ì¼':'ğŸ','ë™ë¬¼':'ğŸ¦','ì‚¬ë¬¼':'âœï¸','íƒˆê²ƒ':'ğŸš—','ì±„ì†Œ':'ğŸ¥•'}; zone.innerHTML = `<span class="zone-name">${category} ${emojiMap[category] || ''}</span>`; container.appendChild(zone); }); addDropZoneEvents(); }
        
        // --- ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ (ì¤‘ë³µ ì„ ì–¸ ì œê±°) ---
        startGameBtn.addEventListener('click', initializeGame);
        stickerBookBtn.addEventListener('click', displayStickerBook);
        stickerBookBackBtn.addEventListener('click', () => showScreen('start-screen'));
        restartBtn.addEventListener('click', () => showScreen('start-screen'));
    });
    </script>

<iframe id="itemscout-extension-gtag" src="./ì²™ì²™ë°•ì‚¬ ë¶„ë¥˜í•˜ê¸° v4.1_files/saved_resource.html" scrolling="no" style="
      width: 1px;
      height: 1px;
      border: none;
      margin: 0;
      position: absolute;
      top:0;
      left:0;
    "></iframe><div id="its-image-search-container"></div><div id="its-image-crop-container"></div></body></html>